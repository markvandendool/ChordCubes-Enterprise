# NVX DIAMOND FONT LIGATURE REFERENCE
## Complete Mapping for All Shelf Chords

**FORMAT:** `scale_degree + interval_quality_suffix`
- **Diamond Content**: Scale degree (what appears inside diamond)
- **Circle Color**: Interval quality suffix (determines background circle color)

**FACE POSITIONS:**
- **Bottom**: Root function (green circle) 
- **Right**: 3rd function (red circle)
- **Top**: 5th function (blue circle)
- **Left**: 7th function (gray circle)

**SUFFIX LEGEND:**
- `r` = Root (green)
- `3rd` = Major 3rd (red)
- `b3rd` = Minor 3rd (red)  
- `5th` = Perfect 5th (blue)
- `b5th` = Diminished 5th (blue)
- `#5th` = Augmented 5th (blue)
- `7th` = Major 7th (gray)
- `b7th` = Minor 7th (gray)
- `bb7th` = Diminished 7th (gray)

**LETTER FORMAT RULES:**
- **Scale degrees**: No space (e.g., `1r`, `b7b7th`)
- **Letter notes**: SPACE required after note (e.g., `C r`, `Bb b7th`)
- **Capitalization**: All letters must be CAPITALIZED

---

## MAJOR KEY CHORDS

### I chord (C major: C-E-G-B)
degreeSets: ['1', '3', '5', '7']
- **Bottom**: `1r` (C = root)
- **Right**: `33rd` (E = major 3rd) 
- **Top**: `55th` (G = perfect 5th)
- **Left**: `77th` (B = major 7th)

### ii chord (D minor: D-F-A-C) 
degreeSets: ['2', '4', '6', '1']
- **Bottom**: `2r` (D = root)
- **Right**: `4b3rd` (F = minor 3rd)
- **Top**: `65th` (A = perfect 5th) 
- **Left**: `1b7th` (C = minor 7th)

### iii chord (E minor: E-G-B-D)
degreeSets: ['3', '5', '7', '2'] 
- **Bottom**: `3r` (E = root)
- **Right**: `5b3rd` (G = minor 3rd)
- **Top**: `7b7th` (B = minor 7th)
- **Left**: `2b7th` (D = minor 7th)

### IV chord (F major: F-A-C-E)
degreeSets: ['4', '6', '1', '3']
- **Bottom**: `4r` (F = root)
- **Right**: `63rd` (A = major 3rd)
- **Top**: `15th` (C = perfect 5th)
- **Left**: `37th` (E = major 7th)

### V chord (G major: G-B-D-F)
degreeSets: ['5', '7', '2', '4'] 
- **Bottom**: `5r` (G = root)
- **Right**: `73rd` (B = major 3rd)
- **Top**: `25th` (D = perfect 5th)
- **Left**: `4b7th` (F = minor 7th)

### vi chord (A minor: A-C-E-G)
degreeSets: ['6', '1', '3', '5']
- **Bottom**: `6r` (A = root) 
- **Right**: `1b3rd` (C = minor 3rd)
- **Top**: `35th` (E = perfect 5th)
- **Left**: `5b7th` (G = minor 7th)

### viiø chord (B half-dim: B-D-F-A) 
degreeSets: ['7', '2', '4', '6']
- **Bottom**: `7r` (B = root)
- **Right**: `2b3rd` (D = minor 3rd) 
- **Top**: `4b5th` (F = diminished 5th)
- **Left**: `6b7th` (A = minor 7th)

---

## APPLIED CHORDS

### I7 chord (C dom7: C-E-G-Bb)
degreeSets: ['1', '3', '5', 'b7']
- **Bottom**: `1r` (C = root)
- **Right**: `33rd` (E = major 3rd)
- **Top**: `55th` (G = perfect 5th) 
- **Left**: `b7b7th` (Bb = minor 7th)

### i7 chord (C min7: C-Eb-G-Bb)
degreeSets: ['1', 'b3', '5', 'b7'] 
- **Bottom**: `1r` (C = root)
- **Right**: `b3b3rd` (Eb = minor 3rd)
- **Top**: `55th` (G = perfect 5th)
- **Left**: `b7b7th` (Bb = minor 7th)

### iiiø chord (E half-dim: E-G-Bb-D)
degreeSets: ['3', '5', 'b7', '2']
- **Bottom**: `3r` (E = root) 
- **Right**: `5b3rd` (G = minor 3rd)
- **Top**: `b7b5th` (Bb = diminished 5th)
- **Left**: `2b7th` (D = minor 7th)

### II(7) chord (D dom7: D-F#-A-C)
degreeSets: ['2', '#4', '6', '1']
- **Bottom**: `2r` (D = root)
- **Right**: `#43rd` (F# = major 3rd) 
- **Top**: `65th` (A = perfect 5th)
- **Left**: `1b7th` (C = minor 7th)

### II chord (D major: D-F#-A-C#)
degreeSets: ['2', '#4', '6', '#1']
- **Bottom**: `2r` (D = root)
- **Right**: `#43rd` (F# = major 3rd)
- **Top**: `65th` (A = perfect 5th)
- **Left**: `#17th` (C# = major 7th)

### #ivø chord (F# half-dim: F#-A-C-E)
degreeSets: ['#4', '6', '1', '3']
- **Bottom**: `#4r` (F# = root)
- **Right**: `6b3rd` (A = minor 3rd)
- **Top**: `1b5th` (C = diminished 5th) 
- **Left**: `3b7th` (E = minor 7th)

### III(7) chord (E dom7: E-G#-B-D)
degreeSets: ['3', '#5', '7', '2']
- **Bottom**: `3r` (E = root)
- **Right**: `#53rd` (G# = major 3rd)
- **Top**: `75th` (B = perfect 5th)
- **Left**: `2b7th` (D = minor 7th)

### #vº chord (G# dim: G#-B-D-F)
degreeSets: ['#5', '7', '2', '4']
- **Bottom**: `#5r` (G# = root)
- **Right**: `7b3rd` (B = minor 3rd)
- **Top**: `2b5th` (D = diminished 5th)
- **Left**: `4bb7th` (F = diminished 7th)

### VI(7) chord (A dom7: A-C#-E-G)
degreeSets: ['6', '#1', '3', '5'] 
- **Bottom**: `6r` (A = root)
- **Right**: `#13rd` (C# = major 3rd)
- **Top**: `35th` (E = perfect 5th)
- **Left**: `5b7th` (G = minor 7th)

### #iº chord (C# dim: C#-E-G-Bb)
degreeSets: ['#1', '3', '5', 'b7']
- **Bottom**: `#1r` (C# = root)
- **Right**: `3b3rd` (E = minor 3rd)
- **Top**: `5b5th` (G = diminished 5th)
- **Left**: `b7bb7th` (Bb = diminished 7th)

### VII(7) chord (B dom7: B-D#-F#-A)
degreeSets: ['7', '#2', '#4', '6']
- **Bottom**: `7r` (B = root)
- **Right**: `#23rd` (D# = major 3rd)
- **Top**: `#45th` (F# = perfect 5th)
- **Left**: `6b7th` (A = minor 7th)

### VII chord (B major: B-D#-F#-A#)
degreeSets: ['7', '#2', '#4', '#6']
- **Bottom**: `7r` (B = root)
- **Right**: `#23rd` (D# = major 3rd) 
- **Top**: `#45th` (F# = perfect 5th)
- **Left**: `#67th` (A# = major 7th)

### #iiº chord (D# dim: D#-F#-A-C)
degreeSets: ['#2', '#4', '6', '1']
- **Bottom**: `#2r` (D# = root)
- **Right**: `#4b3rd` (F# = minor 3rd)
- **Top**: `6b5th` (A = diminished 5th)
- **Left**: `1bb7th` (C = diminished 7th)

---

## MINOR KEY CHORDS

### i chord (C minor: C-Eb-G-Bb)
degreeSets: ['1', 'b3', '5', 'b7']
- **Bottom**: `1r` (C = root)
- **Right**: `b3b3rd` (Eb = minor 3rd)
- **Top**: `55th` (G = perfect 5th)
- **Left**: `b7b7th` (Bb = minor 7th)

### iiø chord (D half-dim: D-F-Ab-C)
degreeSets: ['2', '4', 'b6', '1']
- **Bottom**: `2r` (D = root)
- **Right**: `4b3rd` (F = minor 3rd)
- **Top**: `b6b5th` (Ab = diminished 5th)
- **Left**: `1b7th` (C = minor 7th)

### bIII chord (Eb major: Eb-G-Bb-D)
degreeSets: ['b3', '5', 'b7', '2']
- **Bottom**: `b3r` (Eb = root)
- **Right**: `53rd` (G = major 3rd)
- **Top**: `b75th` (Bb = perfect 5th)
- **Left**: `27th` (D = major 7th)

### iv chord (F minor: F-Ab-C-Eb)
degreeSets: ['4', 'b6', '1', 'b3']
- **Bottom**: `4r` (F = root)
- **Right**: `b6b3rd` (Ab = minor 3rd)
- **Top**: `15th` (C = perfect 5th)
- **Left**: `b3b7th` (Eb = minor 7th)

### v chord (G minor: G-Bb-D-F)
degreeSets: ['5', 'b7', '2', '4']
- **Bottom**: `5r` (G = root)
- **Right**: `b7b3rd` (Bb = minor 3rd)
- **Top**: `25th` (D = perfect 5th)
- **Left**: `4b7th` (F = minor 7th)

### bVI chord (Ab major: Ab-C-Eb-G)
degreeSets: ['b6', '1', 'b3', '5']
- **Bottom**: `b6r` (Ab = root)
- **Right**: `13rd` (C = major 3rd)
- **Top**: `b35th` (Eb = perfect 5th)
- **Left**: `57th` (G = major 7th)

### bVII chord (Bb major: Bb-D-F-A)
degreeSets: ['b7', '2', '4', '6']
- **Bottom**: `b7r` (Bb = root)
- **Right**: `23rd` (D = major 3rd)
- **Top**: `45th` (F = perfect 5th)
- **Left**: `67th` (A = major 7th)

### V(7)(b9) chord (G dom7b9: G-B-D-F with Bb)
degreeSets: ['5', '7', '2', 'b2']
- **Bottom**: `5r` (G = root)
- **Right**: `73rd` (B = major 3rd)
- **Top**: `25th` (D = perfect 5th)
- **Left**: `b2b7th` (Ab = minor 7th, but b2 represents the b9)

### viiº7 chord (B dim7: B-D-F-Ab)
degreeSets: ['7', '2', '4', 'b6']
- **Bottom**: `7r` (B = root)
- **Right**: `2b3rd` (D = minor 3rd)
- **Top**: `4b5th` (F = diminished 5th)
- **Left**: `b6bb7th` (Ab = diminished 7th)

---

## LETTER MODE EQUIVALENTS (Key of C Example)

**Scale Degree → Letter Conversion:**
- `1` → `C`, `2` → `D`, `3` → `E`, `4` → `F`, `5` → `G`, `6` → `A`, `7` → `B`
- `b3` → `Eb`, `b6` → `Ab`, `b7` → `Bb`
- `#1` → `C#`, `#2` → `D#`, `#4` → `F#`, `#5` → `G#`, `#6` → `A#`

**SAMPLE LETTER LIGATURES (Key of C):**

### I chord → C major (C-E-G-B)
- **Bottom**: `C r` (C = root)
- **Right**: `E 3rd` (E = major 3rd) 
- **Top**: `G 5th` (G = perfect 5th)
- **Left**: `B 7th` (B = major 7th)

### ii chord → D minor (D-F-A-C)
- **Bottom**: `D r` (D = root)
- **Right**: `F b3rd` (F = minor 3rd)
- **Top**: `A 5th` (A = perfect 5th) 
- **Left**: `C b7th` (C = minor 7th)

### I7 chord → C dom7 (C-E-G-Bb)
- **Bottom**: `C r` (C = root)
- **Right**: `E 3rd` (E = major 3rd)
- **Top**: `G 5th` (G = perfect 5th) 
- **Left**: `Bb b7th` (Bb = minor 7th)

### bVII chord → Bb major (Bb-D-F-A)
- **Bottom**: `Bb r` (Bb = root)
- **Right**: `D 3rd` (D = major 3rd)
- **Top**: `F 5th` (F = perfect 5th)
- **Left**: `A 7th` (A = major 7th)

**KEY TRANSPOSITION NOTES:**
- Letter equivalents change based on `currentKey`
- Use `transposeNotes()` function to convert scale degrees to actual notes
- Always maintain SPACE after letter notes (e.g., `F# 3rd`, not `F#3rd`)
- Accidentals stay connected to note (e.g., `Bb r`, `C# 3rd`)

---

## IMPLEMENTATION NOTES

1. **Font Loading**: Ensure `NVX Diamond Font.otf` is loaded and available
2. **Ligature System**: The font automatically converts text like `1r` into a diamond with "1" inside and green circle behind
3. **Face Mapping**: 
   - materials[3] = Bottom face (root)
   - materials[0] = Right face (3rd)  
   - materials[2] = Top face (5th)
   - materials[1] = Left face (7th)
4. **Mode Detection**: Use `labelMode` variable to switch between scale degrees and letters
5. **Key Transposition**: Use `transposeNotes(noteSetsC[romanLabel], currentKey)` for letter mode
6. **Current Graphics**: Comment out existing `makeCircleDiamondFace()` calls, replace with NVX font rendering
7. **Error Handling**: Fallback to current system if NVX font fails to load
8. **Ligature Generation Function**: Create `generateNVXLigature(scaleDegree, intervalSuffix, isLetterMode, currentKey)` helper

---

**VERIFICATION STATUS:** ✅ Ready for implementation
**Total Ligature Combinations:** 
- **Scale Degree Mode**: 27 chords × 4 faces = 108 ligatures
- **Letter Mode**: 27 chords × 4 faces × 12 keys = 1,296 ligatures  
- **Grand Total**: 1,404 possible ligature combinations

**CRITICAL SPACING RULES:**
- ✅ Scale degrees: `1r`, `b7b7th` (no space)
- ✅ Letters: `C r`, `Bb b7th` (SPACE after note)
- ✅ Capitalization: `C`, `Bb`, `F#` (always caps)
